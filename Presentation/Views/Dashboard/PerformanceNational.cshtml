@model IEnumerable<VoterVM>
@inject IOptionsSnapshot<Roles> _roles;
@{
    ViewBag.Title = "Tabela e Votueseve";
    Layout = "_DashboardLayout";
    var roles = _roles.Value;
}
<link rel="stylesheet" href="~/cssViews/Performance.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.min.js"></script>
<style>
    input[type="button"] {
transition: all .3s;
    border: 1px solid #ddd;
    padding: 8px 16px;
    text-decoration: none;
    border-radius: 5px;
font-size: 15px;
}

input[type="button"]:not(.active) {
background-color:transparent;
}

.active {
background-color: #ff4d4d;
color :#fff;
}

input[type="button"]:hover:not(.active) {
background-color: #ddd;
} 

</style>
<div class="bg-white">
    <div class="d-flex justify-content-between p-2">
        <div>
            <h2 class="card-title ">Performanca & Raporti - Zgjedhjet nacionale</h2>
        </div>
        @if (User.IsInRole(roles.KryetarIPartise))
        {
            <div class="ps-2">
                <partial name="_ManualiAdminPerformancePartial"></partial>
            </div>
        }
        @if (User.IsInRole(roles.KryetarIKomunes))
        {
            <div class="ps-2">
                <partial name="_ManualiKryetarKomunesPerformancePartial"></partial>
            </div>
        }
        @if (User.IsInRole(roles.KryetarIFshatit))
        {
            <div class="ps-2">
                <partial name="_ManualiKryetarFshatitPerformancePartial"></partial>
            </div>
        }
    </div>
    <div class="d-flex justify-content-center pt-2">
        <div b-fhvjq1vla1="" class="navbar navbar-expand-md navbar-light pe-0 d-flex justify-content-between">
            <div b-fhvjq1vla1="" class="container-fluid d-flex pe-0">
                <a class="navbar-brand fw-semibold" href="/"></a>
                <button b-fhvjq1vla1="" class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#main-nav" aria-controls="main-nav" aria-expanded="false" aria-label="Toggle navigation">
                    <span b-fhvjq1vla1="" class="bi bi-three-dots-vertical noHover"></span>
                </button>
                <div class="testing collapse navbar-collapse justify-content-center align-items-center text-center text-sm-center pe-0" id="main-nav">
                        <div b-fhvjq1vla1="" class="nav-item btnwidth">
                            <div class="dropdown">
                                <a class="nav-link text-md-center hover-link dropdown-toggle butonitoggle btn btn-primary testli" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">Shfaq/Largo kolonat nga lista </a>
                                <ul class="dropdown-menu ultest" aria-labelledby="dropdownMenuLink">
                                    <li><a class="toggle-vis text-decoration-none" data-column="0">Qyteti</a></li>
                                    <li><a class="toggle-vis" data-column="1">Emri dhe Mbiemri</a></li>
                                    <li><a class="toggle-vis" data-column="2">Numri i votuesve</a> </li>
                                    <li><a class="toggle-vis" data-column="3">Numri i telefonit</a> </li>
                                    <li><a class="toggle-vis" data-column="4">Qendra e votimit</a> </li>
                                    <li><a class="toggle-vis" data-column="5">Votues paraprak</a> </li>
                                    <li><a class="toggle-vis" data-column="6">Votues i tanishëm</a> </li>
                                    <li><a class="toggle-vis" data-column="7">Gjasat fillestare</a> </li>
                                    <li><a class="toggle-vis" data-column="8">Gjasat aktuale</a> </li>
                                    <li><a class="toggle-vis" data-column="9">Statusi aktual</a> </li>
                                </ul>
                            </div>
                        </div>&nbsp;&nbsp;
                        <div class="nav-item btnwidth ">
                            <a class="nav-link text-sm-center hover-link butonixls btn btn-primary testli" role="button" onclick="ExportToExcel()"><span class="bi bi-file-excel"></span> Eksporto në excel</a>
                        </div>&nbsp;&nbsp;
                        <form asp-action="Export" asp-controller="Dashboard" method = "post">
                             <input type="hidden" name="GridHtml" />
                             <input class="nav-link text-sm-center hover-link butonixls btn btn-primary testli" type="submit" id="btnSubmit" value="Eksporto në pdf" />
                        </form>
                </div>
            </div>
        </div>
    </div>
    <hr />
    <div class="table table-responsive Grid">
        <style>

        </style>
         <!--IMG-->  <!--paragraf-->
        <div class="testtest" style="display:none !important;">
        </div>
        <table class="table table-striped table-hover small" id="exampleTest">
            <thead>
                <tr style="font-size:12px;" class="align-middle">
                    @if (User.IsInRole("KryetarIFshatit"))
                    {
                        <th scope="col" class="text-center pe-1">
                            Fshati
                        </th>
                    }
                    else
                    {
                        <th scope="col" class="text-center pe-1">
                            Qyteti
                        </th>

                    }
                    <th scope="col" class="text-center pe-1">Emri dhe Mbiemri</th>
                    <th scope="col" class="text-center pe-1">Numri i votuesve </th>
                    <th scope="col" class="text-center pe-1">Numri i telefonit</th>
                    <th scope="col" class="text-center pe-1">Qendra votimit   </th>
                    <th scope="col" class="text-center pe-1">Votues paraprak  </th>
                    <th scope="col" class="text-center pe-1">Votues i tanishëm</th>
                    <th scope="col" class="text-center pe-1">Gjasat fillestare</th>
                    <th scope="col" class="text-center pe-1">Gjasat aktuale</th>
                    <th scope="col" class="text-center pe-1">Statusi aktual</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var voter in Model)
                {
                    <tr style="font-size:13px;" class="align-middle">
                        <td class="text-center">
                            @if (User.IsInRole("KryetarIFshatit"))
                            {
                                @voter.Village
                            }
                            else
                            {
                                @voter.MunicipalityName
                            }
                        </td>
                        <td class="text-center">@voter.FullName</td>
                        <td class="text-center">@voter.VotersNumber</td>
                        <td class="text-center">@voter.PhoneNumber</td>
                        <td class="text-center">@voter.PollCenter</td>
                        <td class="text-center">@voter.PreviousVoter</td>
                        <td class="text-center">@voter.CurrentVoter</td>
                        <td class="text-center">@voter.InitialChances</td>
                        <td class="text-center">@voter.ActualChances</td>
                        <td class="text-center">@voter.ActualStatus</td>
                    </tr>

                }
            </tbody>
        </table>
        <br />
        <br />
        <footer id="footer" class="footer d-none">
        <div class="copyright" style="display:flex; justify-content:center;">
           <p>&copy; <strong>Vota.live</strong> &nbsp;Të  gjitha të drejtat e rezervuara</p>
        </div>
      @*  <div class="credits">
        </div>*@
    </footer><!-- End Footer -->
    </div>
</div>

@*<link rel="stylesheet" type="text/css" href="~/datatable/datatables.css" />*@
<link rel="stylesheet" type="text/css" href="~/DataTablesTestM/datatables.css" />
@section Scripts {
    <script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js" asp-append-version="true"></script>
    @*<script type="text/javascript" src="~/datatable/datatables.js"></script>*@
    <script type="text/javascript" src="~/DataTablesTestM/datatables.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="https://unpkg.com/xlsx@0.15.1/dist/xlsx.full.min.js" asp-append-version="true"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js" asp-append-version="true"></script>
     <script type="text/javascript">
        $(function () {
            $("#btnSubmit").click(function () {
                $("input[name='GridHtml']").val($(".Grid").html());
            });
        });
    </script>
    <script>
        var strValue = "@((string)ViewBag.SaveAndCloseManage)";
        if (strValue !== null && strValue !== "") {
            swal({
                icon: "success",
                text: "Të dhënat u ndryshuan me sukses!",
                timer: 2000,
                buttons: false,
            })
        }
        $(document).ready(function () {
            $('#exampleTest').DataTable();

        });

    </script>
    <script src="~/js/Performance.js"></script>
    <script asp-append-version="true">
        var dataTablesInfo = document.getElementById("dataTables_info");
    </script>
}

